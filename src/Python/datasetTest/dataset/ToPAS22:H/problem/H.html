<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">


<HTML>

<head>
<script type="text/javascript" id="MathJax-script" async
 src="../../tex-svg.js"></script>
</head>

<BODY>

<H1><A NAME="SECTION0008000000000000000">
Problema H: Atenção à Tensão</A>
</H1>

<P>
<BR>

<IMG
 WIDTH="343" HEIGHT="337" BORDER="0"
 SRC="mesa_circular.png"
 ALT="image mesa_circular", align = right>

<P>



Quem se lembra do Sr.  Delicado ?
Ele ofereceu-se prontamente para nos próximos dias mediar uma série de reuniões de negócios entre os representantes de várias potências do mundo empresarial.
<P>

Para cada reunião serão convidados os representantes de \(N\) empresas (sendo \(N\) um número par).
O Sr.  Delicado  disponibilizou, no seu <em>château</em>, uma sala com \(N\) cadeiras dispostas à volta de uma mesa circular, igualmente espaçadas e numeradas de \(1\) a \(N\) no sentido dos ponteiros do relógio.
Em cada cadeira ficará sentado o representante de uma empresa.
<P>

Como é natural, há rivalidades entre algumas das empresas, seja por parcerias passadas que não funcionaram da melhor forma, seja por inveja pelo sucesso da concorrência.
O Sr.  Delicado  foi previamente informado se, para cada par de empresas, existe algum tipo de rivalidade entre elas.
<P>

Cabe, enfim, ao anfitrião decidir o lugar onde se sentará o representante de cada empresa.
É do seu interesse que se conste publicamente que as reuniões no seu
<em>château</em> decorrem livres de discussões acaloradas e, por isso, quer evitar sentar quaisquer dois rivais frente a frente.
Será possível fazê-lo?





<H2><A NAME="SECTION00081000000000000000">
Tarefa</A>
</H2>

Escreva um programa que,
tendo em conta as rivalidades que se verificam entre algumas empresas,
ajude o Sr.  Delicado a descobrir
de quantas formas é possível sentar os representantes
sem que haja dois rivais frente a frente.



<H2><A NAME="SECTION00082000000000000000">
Input</A>
</H2>



A primeira linha do input contém um inteiro, \(R\), que corresponde ao
número de reuniões que terão lugar no <em>château</em> do Sr.  Delicado durante os próximos dias.
Para cada reunião, é fornecida a seguinte informação:
<ul>
  <li>
  A primeira linha relativa a uma reunião contém dois inteiros,  \(N\) e  \(M\) , respetivamente o número de representantes das empresas que se irão reunir e o número de pares de empresas rivais.</li>
  <li>A segunda linha contém \(N\) palavras, separadas por um espaço, indicando os nomes dos representantes das empresas. 
Cada nome é formado por (de 1 a 20) letras maiúsculas ou minúsculas, sem acentos nem cedilhas.
Todos os nomes são diferentes.</li>
<li>Seguem-se \(M\) linhas, cada uma com dois nomes, \(A\) e \(B\),
separados por um espaço. Tal significa que a empresa cujo
representante é \(A\) é rival da empresa cujo representante é \(B\). É
garantido que ambos os nomes correspondem a dois representantes
diferentes e que cada par de rivais não aparece no input mais do que
uma vez.</li>
</ul>



<H2><A NAME="SECTION00083000000000000000">
Restrições</A>



<P>
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT"> </TD><TD ALIGN="LEFT">
\(1 \leq R \leq 5\)
</TD>
<TD ALIGN="LEFT"> Número de reuniões
</TD>
</TR>
<TR><TD ALIGN="LEFT"> </TD><TD ALIGN="LEFT">
\(2 \leq N \leq 12\) e \(N\) é par</TD>
<TD ALIGN="LEFT">  Número de empresas convidadas para uma reunião</TD>
</TR>
<TR><TD ALIGN="LEFT"> </TD><TD ALIGN="LEFT">
\(0 \leq M \leq N(N-1)/2\)</TD>
<TD ALIGN="LEFT">  Número de pares de empresas rivais numa reunião
</TD>
</TR>
</TABLE>

<P>




<H2><A NAME="SECTION00084000000000000000">
Output</A>
</H2>
O output tem uma linha por cada reunião, pela ordem definida no input.
Se, para a respetiva reunião, existir alguma disposição dos representantes das empresas na qual não fiquem dois rivais sentados frente a frente,
a linha tem a forma <code>"Possivel: q"</code> (sem aspas nem acento), onde <code>q</code> é o número de formas distintas de sentar os representantes sem que haja dois rivais frente a frente. No caso contrário, a linha tem a palavra  <code>"Impossivel"</code> (sem aspas nem acento).






<P>

<H2><A NAME="SECTION00085000000000000000">
Exemplo</A>
</H2>

<P>

<H3><A NAME="SECTION00085100000000000000">
Input</A>
</H3>
<PRE>
4
4 3
Amadeu Beatriz Carlos Daniel
Amadeu Carlos
Beatriz Carlos
Daniel Beatriz
4 4
Amadeu Beatriz Carlos Daniel
Amadeu Beatriz
Amadeu Carlos
Beatriz Carlos
Daniel Beatriz
4 0
Rita Tiago Manuel Susana
2 1
Paulo Raquel
Paulo Raquel
</PRE> 

<P>

<H3><A NAME="SECTION00085200000000000000">
Output</A>
</H3>
<PRE>
Possivel: 8
Impossivel
Possivel: 24
Impossivel
</PRE> 
<P>


<H3><A NAME="SECTION00085300000000000000">
Nota</A>
</H3>

Dois exemplos de disposições válidas para a primeira reunião, onde o \(i\)-ésimo nome corresponde ao representante sentado na \(i\)-ésima cadeira (\(1 \le i \le N\)), são:
<ul>
  <li> <code>Amadeu</code>, <code>Carlos</code>, <code>Beatriz</code>,
  <code>Daniel</code> </li>
<li> <code>Daniel</code>,  <code>Amadeu</code>, <code>Carlos</code>,
  <code>Beatriz</code>.
  </li>
  </ul>
  

<P>
<BR><HR>
<ADDRESS>
ToPAS'2022
</ADDRESS>
</BODY>
</HTML>
